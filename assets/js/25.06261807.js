(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{390:function(t,s,a){"use strict";a.r(s);var n=a(45),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"文件包含"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件包含"}},[t._v("#")]),t._v(" 文件包含")]),t._v(" "),a("blockquote",[a("p",[t._v("目标：掌握文件包含的方式和作用，掌握文件包含的路径问题，能够熟练的运用文件包含实现系统性的代码复用")])]),t._v(" "),a("ul",[a("li",[t._v("文件包含概念和应用")]),t._v(" "),a("li",[t._v("文件包含的路径问题")])]),t._v(" "),a("h2",{attrs:{id:"_1、文件包含概念与作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、文件包含概念与作用"}},[t._v("#")]),t._v(" 1、文件包含概念与作用")]),t._v(" "),a("blockquote",[a("p",[t._v("概念")])]),t._v(" "),a("p",[a("strong",[t._v("文件包含")]),t._v("：指将已有的代码以文件形式包含到某个指定的代码中，从而使用其中的代码或者数据")]),t._v(" "),a("ul",[a("li",[t._v("文件包含的本质是将多个文件变成一个整体")]),t._v(" "),a("li",[t._v("使用被包含文件内容")]),t._v(" "),a("li",[t._v("将当前文件内容给被包含文件使用")])]),t._v(" "),a("p",[a("strong",[t._v("文件包含作用")]),t._v("：数据或者结构的跨脚本使用")]),t._v(" "),a("ul",[a("li",[t._v("提升开发效率")]),t._v(" "),a("li",[t._v("提供代码复用")]),t._v(" "),a("li",[t._v("利于代码维护")])]),t._v(" "),a("blockquote",[a("p",[t._v("流程图分析")])]),t._v(" "),a("p",[t._v("1、使用被包含文件内容（被请求文件永远是主体）")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("graph LR\nA[独立文件<br>包含结构或者数据]\nA--\x3e|被包含|B(运行开始<br>被请求的文件)\nB--\x3eC[在被请求文件中<br>应用独立文件里的内容]\nC--\x3eD((完成操作))\n\n")])])]),a("p",[t._v("2、将当前文件内容给被包含文件使用")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("graph LR\nA(A 运行开始<br>被请求的文件)--\x3eB[执行代码<br>产生结构或者数据<br>包含需要使用当前数据的文件]\nB--\x3eC[C 独立文件]\nC--\x3eD[在独立文件中<br>解析A中的数据]\nD--\x3eE((完成操作))\n")])])]),a("blockquote",[a("p",[t._v("小结")])]),t._v(" "),a("p",[t._v("1、文件包含就是在一个被请求执行的PHP文件中引入另外一个文件")]),t._v(" "),a("ul",[a("li",[t._v("使用被包含文件里的代码（被包含文件右数据或者结构）")]),t._v(" "),a("li",[t._v("将当前文件内容给被包含文件使用（被包含文件是用来显示数据）")])]),t._v(" "),a("p",[t._v("2、文件包含的作用")]),t._v(" "),a("ul",[a("li",[t._v("提升开发效率：小规模开发，大规模应用")]),t._v(" "),a("li",[t._v("提供代码复用：一次开发，多次运用")]),t._v(" "),a("li",[t._v("利于代码维护：一处更改，多处有效")])]),t._v(" "),a("h2",{attrs:{id:"_2、文件包含实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、文件包含实现"}},[t._v("#")]),t._v(" 2、文件包含实现")]),t._v(" "),a("blockquote",[a("p",[t._v("概念")])]),t._v(" "),a("p",[t._v("PHP提供了四种文件包含的方式：都可以实现文件的包含")]),t._v(" "),a("ul",[a("li",[t._v("include '文件名' （ include('文件名')）")]),t._v(" "),a("li",[t._v("require '文件名'")]),t._v(" "),a("li",[t._v("include_once '文件名'")]),t._v(" "),a("li",[t._v("require_once '文件名'")])]),t._v(" "),a("blockquote",[a("p",[t._v("步骤")])]),t._v(" "),a("p",[t._v("1、明确当前文件要做的事情")]),t._v(" "),a("ul",[a("li",[t._v("数据或者结构提供者（结构或者配置文件）")]),t._v(" "),a("li",[t._v("数据显示者（HTML模板）")]),t._v(" "),a("li",[t._v("逻辑处理者（用户请求的逻辑处理代码）")])]),t._v(" "),a("p",[t._v("2、给不同的文件提供不同的内容")]),t._v(" "),a("p",[t._v("3、在逻辑处理脚本上确定文件引入的目的")]),t._v(" "),a("ul",[a("li",[t._v("使用被包含文件的数据或者结构：提前包含")]),t._v(" "),a("li",[t._v("将当前处理结果进行显示：最后包含")])]),t._v(" "),a("p",[t._v("4、应用")]),t._v(" "),a("ul",[a("li",[t._v("提前包含（向上包含）：直接在逻辑处理代码中应用被包含文件的数据或者结构")]),t._v(" "),a("li",[t._v("最后包含（向下包含）：在被包含文件中写代码使用逻辑处理脚本里的数据（被包含之前的所有数据）")])]),t._v(" "),a("blockquote",[a("p",[t._v("示例")])]),t._v(" "),a("p",[t._v("需求：在HTML中显示用户的个人信息")]),t._v(" "),a("p",[t._v("1、数据提供者：data.php中保存数据）")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#data.php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$info")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'name'")]),t._v(" \t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'鸟哥'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'age'")]),t._v("  \t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'gender'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'男'")]),t._v("\t\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("2、数据显示者：list.html（模板）")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("显示个人信息"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        姓名：\n        年龄：\n        性别：\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("3、逻辑处理者：controller.php")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#想要使用：data.php中的数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'data.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#逻辑处理：判定等：可以使用data.php中的数据，因为是先包含")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#想要显示数据：list.html，只能在list.hml使用上面的所有数据（不管是包含，还是当前脚本产生的）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'list.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\n")])])]),a("p",[t._v("逻辑处理脚本（浏览器请求的脚本）自始至终都只做处理逻辑，不做其他事情（不提供数据、不进行显示）")]),t._v(" "),a("p",[t._v("既然要显示数据，就需要在数据显示者中利用PHP显示数据（list.html）")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("显示个人信息"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--当前文件为HTML后缀，但是不独立运行会被PHP包含，所以可以嵌入PHP代码--\x3e")]),t._v("\n        姓名："),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php echo $info['name'];?>")]),t._v("\n        年龄："),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php echo $info['age'];?>")]),t._v("\n        性别："),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php echo $info['gender'];?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("小结")])]),t._v(" "),a("p",[t._v("1、实现文件包含有四种方式")]),t._v(" "),a("ul",[a("li",[t._v("include 和 include_once")]),t._v(" "),a("li",[t._v("require 和 require_once")])]),t._v(" "),a("p",[t._v("2、文件包含看对于被包含文件的需求分为")]),t._v(" "),a("ul",[a("li",[t._v("先包含：为了使用被包含文件中的数据或者结构")]),t._v(" "),a("li",[t._v("后包含：为了将当前所有数据给被包含文件使用\n"),a("ul",[a("li",[t._v("被包含文件通常是为了显示数据")]),t._v(" "),a("li",[t._v("可以不用管是什么格式，但是需要用PHP标签和语法来输出数据")])])])]),t._v(" "),a("h2",{attrs:{id:"_3、文件包含区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、文件包含区别"}},[t._v("#")]),t._v(" 3、文件包含区别")]),t._v(" "),a("blockquote",[a("p",[t._v("分析")])]),t._v(" "),a("p",[t._v("1、include和require的区别")]),t._v(" "),a("ul",[a("li",[t._v("include找不到文件报警告错误，不影响后续代码的继续执行")]),t._v(" "),a("li",[t._v("require找不到文件报致命错误，后续代码终止执行")])]),t._v(" "),a("p",[t._v("2、与_once的区别")]),t._v(" "),a("ul",[a("li",[t._v("没有_once：多次包含，系统会多次加载（如果有函数会报同名错误）")]),t._v(" "),a("li",[t._v("有_once：只包含一次，系统包含后会记录当前被包含文件是否包含过\n"),a("ul",[a("li",[t._v("优势：安全")]),t._v(" "),a("li",[t._v("缺点：效率低")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("示例")])]),t._v(" "),a("p",[t._v("1、被包含文件：data.php")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("display")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__FUNCTION__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("2、include和require的区别")]),t._v(" "),a("p",[t._v("include包含不存在文件")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'d.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#报错")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'hello world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输出hello world")]),t._v("\n")])])]),a("p",[t._v("require包含不存在文件")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'d.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#报错")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'hello world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#没有输出")]),t._v("\n")])])]),a("p",[t._v("3、include与include_once的区别（require和require_once一样）")]),t._v(" "),a("p",[t._v("include重复包含文件")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'data.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输出display")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'data.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#报错：display函数在前面已经定义过")]),t._v("\n")])])]),a("p",[t._v("include_once重复包含文件")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include_once")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'data.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输出display")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include_once")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'data.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#没有任何反应（忽略）")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("小结")])]),t._v(" "),a("p",[t._v("1、include和require的区别是对于找不到文件的错误处理方式")]),t._v(" "),a("ul",[a("li",[t._v("include给个警告，代码继续运行")]),t._v(" "),a("li",[t._v("require给个错误，代码终止运行")])]),t._v(" "),a("p",[t._v("2、include和include_once的区别")]),t._v(" "),a("ul",[a("li",[t._v("include会重复包含，可能导致报错（结构重复）")]),t._v(" "),a("li",[t._v("include_once只会包含一次（有开销）")])]),t._v(" "),a("p",[t._v("3、在编程过程中我们应该尽可能保证代码的可运行性")]),t._v(" "),a("ul",[a("li",[t._v("尽可能使用require来包含结构和数据文件（容易排错）")]),t._v(" "),a("li",[t._v("尽可能使用include来包含外部可能存在的文件（重要性不高）")]),t._v(" "),a("li",[t._v("尽可能不用_once来进行文件包含\n"),a("ul",[a("li",[t._v("效率低")]),t._v(" "),a("li",[t._v("是否包含过应该开发者自己控制")])])])]),t._v(" "),a("h2",{attrs:{id:"_4、文件包含原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、文件包含原理"}},[t._v("#")]),t._v(" 4、文件包含原理")]),t._v(" "),a("blockquote",[a("p",[t._v("概念")])]),t._v(" "),a("p",[a("strong",[t._v("文件包含原理")]),t._v("：本质就是将被包含文件的代码包放到文件包含的代码处")]),t._v(" "),a("ul",[a("li",[t._v("PHP代码：直接放到对应位置")]),t._v(" "),a("li",[t._v("非PHP代码：放到对应位置，但是PHP后续不会进行解析")]),t._v(" "),a("li",[t._v("文件包含的代码是在执行阶段进行解析\n"),a("ul",[a("li",[t._v("编译阶段不会将被包含文件加载进来")]),t._v(" "),a("li",[t._v("被包含文件运行时独立编译")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("流程图解析")])]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("graph LR\nA(访问PHP脚本)--\x3eB[编译脚本]\nB--\x3eC[执行PHP脚本]\nC--\x3eD{是否有文件包含}\nD--\x3e|有|E[加载文件<br>独立编译]\nE--\x3eG{是否是PHP代码}\nG--\x3e|不是|H[保留不管]\nG--\x3e|是|I[解析]\nH--\x3eF\nI--\x3eF\nD--\x3e|没有|F((执行到最后))\n")])])]),a("p",[t._v("因此：")]),t._v(" "),a("ul",[a("li",[t._v("在包含文件代码之前的所有代码只要没错都会执行")]),t._v(" "),a("li",[t._v("文件包含编译如果出错，只会影响到后续代码")])]),t._v(" "),a("blockquote",[a("p",[t._v("小结")])]),t._v(" "),a("p",[t._v("1、文件包含是在执行阶段才会读取文件并进行独立编译的")]),t._v(" "),a("p",[t._v("2、对于被包含文件")]),t._v(" "),a("ul",[a("li",[t._v("PHP代码会解析")]),t._v(" "),a("li",[t._v("非PHP代码直接保留（当做HTML）")])]),t._v(" "),a("h2",{attrs:{id:"_5、文件包含路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、文件包含路径"}},[t._v("#")]),t._v(" 5、文件包含路径")]),t._v(" "),a("blockquote",[a("p",[t._v("概念")])]),t._v(" "),a("p",[a("strong",[t._v("文件包含路径")]),t._v("：指PHP在进行文件包含时能按照计算机上的路径找到目标文件")]),t._v(" "),a("ul",[a("li",[t._v("绝对路径\n"),a("ul",[a("li",[t._v("本地绝对路径：磁盘目录（D:/server/apache/htdocs/index.php）")]),t._v(" "),a("li",[t._v("网络绝对路径：url（http://www.baidu.com/resource/data.php）PHP默认不支持")])])]),t._v(" "),a("li",[t._v("相对路径\n"),a("ul",[a("li",[t._v("当前目录： "),a("code",[t._v("./")]),t._v("  或者没有任何路径信息（默认当前文件所在路径）")]),t._v(" "),a("li",[t._v("上级目录： "),a("code",[t._v("../")]),t._v(" 当前目录上级目录")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("步骤")])]),t._v(" "),a("p",[t._v("1、确定要包含的文件所在位置")]),t._v(" "),a("p",[t._v("2、使用路径进行明确包含")]),t._v(" "),a("blockquote",[a("p",[t._v("示例")])]),t._v(" "),a("p",[t._v("---- dirA（D:/dirA）")]),t._v(" "),a("p",[t._v("-------- a.php")]),t._v(" "),a("p",[t._v("----- dirB（D:/dirB）")]),t._v(" "),a("p",[t._v("-------- b.php")]),t._v(" "),a("p",[t._v("1、相对路径包含：适合本身就在当前文件夹或者上级目录")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#b.php：所在d:/dirB\t./表示dirB ../表示D:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'../dirA/a.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("2、绝对路径包含")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#b.php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'D:/dirA/a.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("3、互联网绝对路径包含")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#b.php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'http://www.baidu.com/index.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#报错：PHP关闭了url包含文件（不安全），开启配置即可")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("小结")])]),t._v(" "),a("p",[t._v("1、文件不管是在本地磁盘函数互联网都是有路径的")]),t._v(" "),a("p",[t._v("2、包含文件通常需要指定路径")]),t._v(" "),a("ul",[a("li",[t._v("绝对路径\n"),a("ul",[a("li",[t._v("磁盘路径：根目录买时")]),t._v(" "),a("li",[t._v("互联网路径：url路径")])])]),t._v(" "),a("li",[t._v("相对路径\n"),a("ul",[a("li",[t._v("当前目录： "),a("code",[t._v("./")]),t._v(" 或者直接文件名（建议：直接文件名，不用"),a("code",[t._v("./")]),t._v("）")]),t._v(" "),a("li",[t._v("上级目录： "),a("code",[t._v("../")])])])])]),t._v(" "),a("p",[t._v("3、在进行文件包含时建议两种")]),t._v(" "),a("ul",[a("li",[t._v("绝对路径：效率低，但是准确度高（建议）")]),t._v(" "),a("li",[t._v("相对路径：效率高，相同目录下可以（直接使用文件名），有安全性问题（"),a("code",[t._v("./")]),t._v("和"),a("code",[t._v("../")]),t._v("导致）")])]),t._v(" "),a("h2",{attrs:{id:"_6、嵌套包含路径问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、嵌套包含路径问题"}},[t._v("#")]),t._v(" 6、嵌套包含路径问题")]),t._v(" "),a("blockquote",[a("p",[t._v("概念")])]),t._v(" "),a("p",[t._v("嵌套包含路径问题：指的是在进行文件包含时使用了相对路径（./或者../），而且文件又有嵌套包含，导致./或者../无法正确识别路径")]),t._v(" "),a("ul",[a("li",[t._v("每个文件夹下都有./和../")]),t._v(" "),a("li",[t._v("嵌套包含会让系统无法正确原文件中./和../到底从哪开始")]),t._v(" "),a("li",[t._v("系统永远从当前工作目录的./和../开始寻找")])]),t._v(" "),a("blockquote",[a("p",[t._v("步骤")])]),t._v(" "),a("p",[t._v("1、A文件夹中有文件a.php和B文件夹")]),t._v(" "),a("p",[t._v("2、B文件夹中有b.php和C文件夹")]),t._v(" "),a("p",[t._v("3、C文件夹中有c.php")]),t._v(" "),a("p",[t._v("4、a.php包含b.php，同时b.php包含c.php")]),t._v(" "),a("p",[t._v("5、访问a.php")]),t._v(" "),a("blockquote",[a("p",[t._v("示例")])]),t._v(" "),a("p",[t._v("1、A文件夹中a.php")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'./B/b.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("2、B文件夹中b.php")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'./C/c.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("3、C文件夹中c.php")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("注意：")]),t._v(" "),a("p",[t._v("1、独立访问b.php和c.php都没有问题")]),t._v(" "),a("p",[t._v("2、访问a.php，那么当前的工作路径就是A文件夹，b.php是在A目录工作，所以b.php的./目录属于A，因此找不到A文件夹下的C文件夹")]),t._v(" "),a("blockquote",[a("p",[t._v("小结")])]),t._v(" "),a("p",[t._v("1、文件嵌套包含时./和../容易产生路径错乱问题")]),t._v(" "),a("ul",[a("li",[t._v("每个文件夹下都有./和../")]),t._v(" "),a("li",[t._v("脚本中的./和../是根据实际工作目录而定，而不是文件所在目录")])]),t._v(" "),a("p",[t._v("2、为了避免出现嵌套路径问题，我们可以用以下解决方案")]),t._v(" "),a("ul",[a("li",[t._v("不使用相对路径./和../包含文件")]),t._v(" "),a("li",[t._v("使用绝对路径包含文件（推荐）")]),t._v(" "),a("li",[t._v("所有文件都放到一个文件夹下（几乎不可能，不利于维护）")])])])}),[],!1,null,null,null);s.default=e.exports}}]);